# Page Router 장점

## 장점 1. 파일 시스템 기반의 간편한 페이지 라우팅 제공

- Pages 폴더의 구조를 기반으로 추가적인 코드 작성 필요 없이 페이지 라우팅 처리가 가능하다.
- 동적 경로를 사용하는 다이나믹 페이지의 경우에도 대괄호([])를 통해서 하나의 URL 파라미터에 대응하거나 `[...]`으로 중첩된 모든 URL 파라미터에 대응하거나 `[[...]]`인덱스 페이지를 포함해 모든 URL 파라미터에 대응하도록 설정이 가능하다.

## 장점 2. 다양한 방식의 사전 렌더링 제공

- 리액트의 단점인 느린 FCP라는 단점을 효과적으로 해결하기 위해 브라우저로 접속 요청을 받았을 때 서버 측에서 직접 JS 코드를 실행해서 완성된 HTML 페이지를 미리 생성해 브라우저에 응답해 FCP 시간을 단축하는 사전 렌더링 방식으로 동작

- SSR / SSG / ISR 세 가지의 사전 렌더링 방식
  - SSR: 브라우저가 넥스트 서버에 접속요청을 보낼 때 마다 매번 새롭게 페이지를 생성.
    - 장점: 항상 최신의 데이터를 보장한다.
    - 단점: 새롭게 페이지를 생성하는 과정에서 백엔드 서버에게 데이터를 요청했을 때 상황에 따라 딜레이가 발생해 응답 속도가 느려질 수 있다.
  - SSG: 빌드타임에 미리 넥스트 서버측에서 페이지를 정적으로 생성해둔다.
    - 장점: 빌드 타임 과정에서 오랜 시간이 소요되더라도 모두 서버 가동 이전에 빌드 타임에만 일어나는 일이기 때문에 SSR의 단점을 보안
    - 단점: 빌드 타임 이후에 다시는 이 페이지를 재생성하지 않기 때문에 최신 데이터를 반영하기 어렵다.
  - ISR: 빌드 타임에 미리 생성된 정적 페이지에 유통기한을 설정하여 최신 데이터를 반영하는 방식
    - 시간을 설정하는 방식과 유저의 특정 행동에 따라 설정하는 방식이 있다.

# Page Router 단점

## 단점 1. 페이지별 레이아웃 설정이 번거롭다

- 레이아웃이 적용되길 원하는 페이지마다 `.getLayout()`으로 매번 새롭게 추가해야 했다.
- 페이지별 설정이 많아지고 코드의 중복이 발생하게 된다.

## 단점 2. 데이터 페칭이 페이지 컴포넌트에 집중된다.

- `getServerSideProps`나 `getStaticProps`의 함수로 서버와 연결하여 받은 데이터를 페이지 컴포넌트에 props로 전달한다.
- 만약 복잡한 페이지를 구현하여 페이지 안에 여러 자식 컴포넌트들이 있고 트리의 아래 하위 컴포넌트에 데이터가 필요하다면 페이지 컴포넌트로부터 props 값을 타고 내려가야하는 과정이 발생한다.

## 단점 3. 불 필요한 컴포넌트들도 JS Bundle에 포함된다.

- 불필요한 컴포넌트란, 상호작용을 하는 기능이 없어 초기에 페이지에 그려지고 나서 하이드레이션을 할 필요가 없는 컴포넌트를 의미한다.
- SSR에서는 서버에서 사전 렌더링을 위해 JS 코드가 한 번 실행되고, 브라우저에서 하이드레이션을 위해 한 번더 실행된다.
- 하이드레이션은 HTML만 렌더링된 페이지에 자바스크립트 코드를 연결해서 사용자의 클릭이나 입력과 같은 이벤트에 상호작용을 추가하기 위한 과정이다. 하이드레이션을 위해서 모든 리액트 컴포넌트들이 브라우저에서 한 번더 실행되는 과정을 거치게된다.
- 때문에 불필요한 컴포넌트들은 하이드레이션을 진행할 필요가 없기 때문에 사전 렌더링 이후에는 실행될 필요가 없지만 Page Router에서는 현재 페이지에 포함하는 모든 컴포넌트들을 상호작용 구분 없이 전부 하나의 JS 번들에 묶어서 브라우저에 전달한다.
- 때문에 JS 번들은 불필요하게 커지고 되고 그에 비례해서 하이드레이션이 완료되는 시간이 오래걸리게 되어 TTI에 걸리는 시간이 늦어지게 된다.
