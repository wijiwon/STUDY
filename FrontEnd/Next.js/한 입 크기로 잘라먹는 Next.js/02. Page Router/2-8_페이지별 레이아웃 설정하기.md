# ë ˆì´ì•„ì›ƒì„ ê°œë³„ í˜ì´ì§€ì— ì ìš©í•˜ëŠ” ë°©ë²•

- ë ˆì´ì•„ì›ƒì„ ëª¨ë“  í˜ì´ì§€ì— ì ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í•„ìš”í•œ ê° í˜ì´ì§€ì—ë§Œ ì ìš©í•˜ëŠ” ë°©ë²•
- ê²€ìƒ‰ë°”ë¥¼ '~/', '~/search' ê²½ë¡œì—ì„œëŠ” ë…¸ì¶œí•˜ë˜ '~/book'ì—ì„œëŠ” ë…¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤.

1. src/components/searchable-layout.tsx: ì„œì¹˜ë°” ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•œë‹¤.

```ts
import { ReactNode } from "react";

export default function SearchableLayout({
  children,
}: {
  children: ReactNode;
}) {
  return (
    <div>
      <div>ì„ì‹œ ì„œì¹˜ë°”</div>
      {children}
    </div>
  );
}
```

2. ì„œì¹˜ë°” ë ˆì´ì•„ì›ƒì´ ë“¤ì–´ê°€ê¸° í¬ë§í•˜ëŠ” í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸(index.tsx, search.tsx)ì— ì„œì¹˜ë°” ë ˆì•„ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶œë ¥í•  ë©”ì†Œë“œ `.getLayout`ë¥¼ ìƒì„±í•œë‹¤.

   - `.getLayout`: í˜„ì¬ í˜ì´ì§€ì˜ ì—­í• ì„ í•˜ëŠ” page ì»´í¬ë„ŒíŠ¸ë¥¼ ì¸ìë¡œ ë°›ì•„ `SearchableLayout`ì„ ê°ì‹¼ í˜•íƒœë¡œ ë¦¬í„´í•˜ëŠ” ë©”ì†Œë“œ

   - index.tsx

   ```ts
   import SearchableLayout from "@/components/searchable-layout";

   export default function Home() {
     return ( ... );
   }

   Home.getLayout = (page: ReactNode) => {
     return <SearchableLayout>{page}</SearchableLayout>;
   };
   ```

   - search/index.tsx

   ```ts
   import SearchableLayout from "@/components/searchable-layout";

   export default function Page() {
       ...
   }

   Page.getLayout = (page: ReactNode) => {
     return <SearchableLayout>{page}</SearchableLayout>;
   };
   ```

   > <b>ğŸ‘©â€ğŸ« ì–´ë–»ê²Œ í•¨ìˆ˜ì— ë©”ì†Œë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‚˜ìš”?</b> <br>
   > ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  í•¨ìˆ˜ëŠ” ê°ì²´ì´ê¸° ë•Œë¬¸!

3. \_app.tsxì—ì„œ `App`í•¨ìˆ˜ì—ì„œ `Component` ì¸ìë¡œ index.tsxì˜ `Home`ì´ ì „ë‹¬ë˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒì„±í•œ ë©”ì†Œë“œì¸ `.getLayout`ë„ í•¨ê»˜ ì „ë‹¬ëœë‹¤.

   - getLayout ë³€ìˆ˜ì— `.getLayout`ë©”ì†Œë“œë¥¼ ì €ì¥í•œë‹¤. ë§Œì•½ ì»´í¬ë„ŒíŠ¸ì— `.getLayout`ë©”ì†Œë“œê°€ ì¡´ì œí•˜ì§€ ì•Šìœ¼ë©´ undefined ì²˜ë¦¬ê°€ ë˜ë¯€ë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.

   - ì˜ˆì™¸ì²˜ë¦¬ëŠ” ?? ì—°ì‚°ìë¥¼ í†µí•´ì„œ Component.getLayoutì´ undefinedì´ë©´ í˜„ì¬ í˜ì´ì§€ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ ê·¸ëŒ€ë¡œ ë¦¬í„´í•´ì¤€ë‹¤.

   ```ts
   import GlobalLayout from "@/components/global-layout";
   import "@/styles/globals.css";
   import type { AppProps } from "next/app";
   import { ReactNode } from "react";

   export default function App({ Component, pageProps }: AppProps) {
     const getLayout = Component.getLayout ?? ((page: ReactNode) => page);

     return (
       <GlobalLayout>{getLayout(<Component {...pageProps} />)}</GlobalLayout>
     );
   }
   ```

4. `.getLayout` ë©”ì†Œë“œì˜ íƒ€ì…ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìƒˆë¡œìš´ íƒ€ì…ì¸ `NextPageWihtLayout`ì„ ì„¤ì •í•´ ì ìš©í•œë‹¤.

   - íƒ€ì…ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ?

     - `.getLayout` ë©”ì†Œë“œëŠ” ê°œë°œìê°€ ì„ì˜ë¡œ ë§Œë“  ë©”ì†Œë“œì´ê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ì¸ íƒ€ì… ì •ë³´ì— í¬í•¨ë˜ì§€ ì•Šì•„ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

   - `NextPageWihtLayout`: `NextPage`(nextì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” page ì»´í¬ë„ŒíŠ¸ íƒ€ì…)ì— `.getLayout`ì„ ì¶”ê°€í•œ íƒ€ì…ì´ë‹¤.
     - `.getLayout`ì€ ReactNodeë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ê³  ReactNodeë¥¼ ë°˜í™˜í•œë‹¤ëŠ” íƒ€ì… ì§€ì •ì„ í•´ì¤€ë‹¤.
     - book í˜ì´ì§€ ì²˜ëŸ¼ `getLayout`ì´ ì—†ëŠ” í˜ì´ì§€ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ?ë¥¼ ë¶™ì—¬ optionalí•œ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•œë‹¤. => `getLayout?`

   ```ts
   type NextPageWithLayout = NextPage & {
     getLayout?: (page: ReactNode) => ReactNode;
   };
   ```

5. `App` ì»´í¬ë„ŒíŠ¸ì˜ `Component` props íƒ€ì…ì„ `NextPageWithLayout` íƒ€ì…ìœ¼ë¡œ í™•ì¥í•œë‹¤.
   - ë”°ë¼ì„œ, `Component` PropsëŠ” `NextPageWithLayout`ë¼ëŠ” íƒ€ì…ìœ¼ë¡œì¨ `getLayout` ë©”ì†Œë“œë¥¼ í¬í•¨í•˜ëŠ” NextPage íƒ€ì…ì´ë‹¤.

```ts
export default function App({
  Component,
  pageProps,
}: AppProps & { Component: NextPageWithLayout }) { ... }
```

# SearchBar ê¸°ëŠ¥, ìŠ¤íƒ€ì¼ë§ êµ¬í˜„

## SearchBar ê¸°ëŠ¥ êµ¬í˜„

1. input íƒœê·¸ì— ì‚¬ìš©ìê°€ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™ì‹œì¼œì¤€ë‹¤.

   - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ì–´ë¥¼ ë‹´ì„ `useState` ë³€ìˆ˜ë¥¼ ë§Œë“ ë‹¤.

   - inputì˜ ì…ë ¥ê°’ì´ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ state ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ `onChangeSearch` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ìƒì„±í•œë‹¤.

   - `onChangeSearch`: Reactì˜ HTMLInputElementì—ì„œ ë°œìƒí•œ ChangeEvent íƒ€ì…ì´ë‹¤.

   ```ts
   const [search, setSearch] = useState("");

   const onChangeSearch = (e: React.ChangeEvent<HTMLInputElement>) => {
     setSearch(e.target.value);
   };

   <div className={style.searchbar_container}>
     <input
       value={search}
       onChange={onChangeSearch}
       placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” ..."
     />
     <button>ê²€ìƒ‰</button>
   </div>;
   ```

   - ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í˜„ì¬ ì…ë ¥í•œ ê²€ìƒ‰ì–´ì™€ í•¨ê»˜ ì„œì¹˜ í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸° ìœ„í•œ `onSubmit` í•¨ìˆ˜ë¥¼ ìƒì„±í•œë‹¤. í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ í”„ë¡œê·¸ë˜ë§¤í‹±í•˜ê²Œ ì´ë™í•˜ê¸° ìœ„í•´ `useRouter`ë¥¼ ì‚¬ìš©í•œë‹¤.

   - `router.push()`ë¥¼ ì´ìš©í•´ í˜ì´ì§€ ì´ë™ì„ êµ¬í˜„í•œë‹¤.
   - ì…ë ¥ëœ ê²€ìƒ‰ì–´ê°€ ì—†ìœ¼ë©´ í˜ì´ì§€ ì´ë™ì„ í•˜ì§€ ì•Šë„ë¡ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤.

   ```ts
   const onSubmit = () => {
     if (!search) return;
     router.push(`/search?q=${search}`);
   };

   <div className={style.searchbar_container}>
     <input
       value={search}
       onChange={onChangeSearch}
       placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” ..."
     />
     <button onClick={onSubmit}>ê²€ìƒ‰</button>
   </div>;
   ```

2. ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ê²€ìƒ‰ì„ ì™„ë£Œí•˜ê³  ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´ ê²€ìƒ‰ ê²°ê³¼ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ì§€ë§Œ ê²€ìƒ‰ì–´ëŠ” ì´ˆê¸°í™”ëœë‹¤. ê²€ìƒ‰ì–´ê°€ ì…ë ¥ë˜ì—ˆë‹¤ë©´ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì˜ ê°’ì´ ìˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì˜ ê°’ì´ ìˆë‹¤ë©´ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ê°’ìœ¼ë¡œ ê²€ìƒ‰ì–´ ê°’ì„ ë„£ì–´ì¤€ë‹¤.

   - ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì˜ ê°’ì„ ë°›ì•„ì˜¬ ë³€ìˆ˜ `q`ë¥¼ ìƒì„±í•œë‹¤. ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ì˜ ê°’ì„ string ê°’ìœ¼ë¡œ ì €ì¥í•´í– í•˜ëŠ”ë° ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì€ ì—¬ëŸ¬ ê°œì˜ ê°’ì´ ìˆì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì— stringì´ë‚˜ stringArray, undefinedì¼ ìˆ˜ë„ ìˆë‹¤. ë•Œë¬¸ì— `as string`ì„ ì…ë ¥í•´ qì˜ íƒ€ì…ì„ stringíƒ€ì…ìœ¼ë¡œ ì¶”ë¡ í•˜ë„ë¡ ì„¤ì •í•´ ì˜¤ë¥˜ë¥¼ í”¼í•œë‹¤.

   - `useEffet` í›…ì„ ì‚¬ìš©í•´ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ qì˜ ê°’ì´ ë³€í•˜ë©´ ê²€ìƒ‰ì–´ê°€ ë°”ë€Œì—ˆë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ `setSearch` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ qì˜ ê°’ì´ ìˆìœ¼ë©´ qì˜ ê°’ì„ ë„£ê³ , ì—†ë‹¤ë©´ ë¹ˆ ë¬¸ìì—´ì„ ë„£ëŠ”ë‹¤.

   ```ts
   const q = router.query.q as string;

   useEffect(() => {
     setSearch(q || "");
   }, [q]);
   ```

3. ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆ„ë¥´ì§€ ì•Šê³  ì—”í„°í‚¤ë¥¼ ëˆ„ë¥´ë©´ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

   - `onKeyDown` í•¨ìˆ˜ë¥¼ ìƒì„±í•´ enterí‚¤ë¥¼ ëˆ„ë¥´ë©´ ê²€ìƒ‰í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜ì¸ `onSubmit` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.

   ```ts
   const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
     if (e.key === "Enter") {
       onSubmit();
     }
   };

   <div className={style.searchbar_container}>
     <input
       value={search}
       onChange={onChangeSearch}
       onKeyDown={onKeyDown}
       placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” ..."
     />
     <button onClick={onSubmit}>ê²€ìƒ‰</button>
   </div>;
   ```

4. ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì˜ ê°’ê³¼ ê²€ìƒ‰ì–´ì˜ ê°’ì´ ë™ì¼í•˜ë‹¤ë©´ ì´ë¯¸ ê²€ìƒ‰ëœ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ê³  ìˆìœ¼ë¯€ë¡œ í˜ì´ì§€ ì´ë™ì„ í•  í•„ìš”ê°€ ì—†ë‹¤. ë¶ˆí•„ìš”í•œ í˜ì´ì§€ ì´ë™ì„ ë°©ì§€í•œë‹¤.
   - onSubmit í•¨ìˆ˜ì˜ ì¡°ê±´ë¬¸ì— ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì˜ ê°’ì´ ê²€ìƒ‰ì–´ì™€ ë™ì¼í•˜ë‹¤ë©´ returnì„ ì‹œí‚¤ë„ë¡ í•œë‹¤. `q === search`

```ts
const onSubmit = () => {
  if (!search || q === search) return;
  router.push(`/search?q=${search}`);
};
```

## SearchBar ìŠ¤íƒ€ì¼ë§ êµ¬í˜„

1. searchable-layout.module.cssë¥¼ ìƒì„±í•´ searchable-layout.tsxì— import í•œë‹¤.

2. css íŒŒì¼ì—ì„œ ìŠ¤íƒ€ì¼ì„ ìƒì„±í•˜ê³  tsx íŒŒì¼ì—ì„œ ìƒì„±í•œ ìŠ¤íƒ€ì¼ì„ ì ìš©ì‹œí‚¨ë‹¤.

   - searchable-layout.module.css

   ```ts
   .searchbar_container {
     display: flex;
     gap: 10px;
     margin-bottom: 20px;
   }

   .searchbar_container > input {
     flex: 1;
     padding: 15px;
     border-radius: 5px;
     border: 1px solid rgb(220, 220, 220);
   }

   .searchbar_container > button {
     width: 80px;
     border-radius: 5px;
     border: none;
     background-color: rgb(37, 137, 255);
     color: white;
     cursor: pointer;
   }
   ```

   - searchable-layout.tsx

   ```ts
   import style from "./searchable-layout.module.css";

   ...

    return (
     <div>
       <div className={style.searchbar_container}>
         <input/>
         <button onClick={onSubmit}>ê²€ìƒ‰</button>
       </div>
       {children}
     </div>
   );

   ```
